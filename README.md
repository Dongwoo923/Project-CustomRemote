# 커스텀 리모컨 (Custom IR Remote Controller)

IR 송·수신 센서를 활용하여 여러 기기의 리모컨 기능을 하나의 디바이스로 통합한 **만능 커스텀 리모컨 프로젝트**입니다. 기존 리모컨의 IR 신호를 학습(Learning)하고, 이를 저장한 뒤 필요 시 재송신(Replay)하는 구조로 설계되었습니다.

---

## 📌 프로젝트 개요

* **프로젝트명**: 커스텀 리모컨
* **참여 인원**: 이동우, 이동현
* **핵심 기능**: IR 신호 학습 및 재생
* **개발 목표**: 하나의 리모컨으로 TV, 에어컨, 빔프로젝터 등 다양한 기기 제어

---

## 🛠 사용 기술 및 부품

### Hardware

* **MCU**: STM32F411RE
* **입력 장치**: 조이스틱 모듈 (X, Y, Z)
* **출력 장치**: LCD1602 (I2C)
* **IR 수신부**: VS1838 IR Receiver
* **IR 송신부**: IR LED + BC547 (NPN 트랜지스터)
* **기타 부품**: 저항 (100Ω, 1kΩ)

### Software / Firmware

* STM32CubeMX
* Timer 기반 PWM 제어
* Flash Memory 제어

---

## 🧩 시스템 구성

```
[ Joystick ]
      │
      ▼
[ STM32F411RE ] ── LCD1602 (I2C)
      │
      ├─ IR Receiver (VS1838)
      │
      └─ IR LED + NPN Transistor (PWM, 38kHz)
```

---

## 🔄 동작 흐름

1. IR 수신기를 통해 기존 리모컨의 적외선 신호 수신
2. 수신된 IR 데이터를 내부 Flash 메모리에 저장
3. 조이스틱 입력으로 리모컨 및 기능 선택
4. 선택된 IR 데이터를 PWM 기반 IR 신호로 재송신
5. 대상 기기 제어

---

## ⚙️ 주요 기능

### 1. IR 신호 수신

* 기존 리모컨의 IR 신호를 수신하여 데이터화
* NEC, LG 등 다양한 IR 프로토콜 대응 가능

### 2. IR 신호 플래시 저장

* 수신한 IR 데이터를 내부 Flash 메모리에 저장
* 전원 차단 후에도 유지되는 비휘발성 구조
* Sector7 (약 32KB) 활용 → 약 140개 데이터 저장 가능

### 3. 조이스틱 기반 사용자 입력

* X, Y 축: 메뉴 이동
* Z 버튼: 선택 및 송신
* 직관적인 UI 구성

### 4. LCD 디스플레이 출력

* 현재 선택된 리모컨 이름 및 상태 표시
* 사용자에게 실시간 동작 피드백 제공

### 5. PWM 기반 IR 송신

* Timer를 이용해 **38kHz PWM 신호 생성**
* NPN 트랜지스터를 스위칭 회로로 사용하여 IR LED 구동 전류 확보
* 정확한 주기 및 듀티비 제어로 리모컨 신호 정밀 재현

---

## 🧯 트러블 슈팅 경험

### 문제 상황

IR LED 출력 세기가 약해 신호 인식이 불안정하여 리모컨 동작이 원활하지 않은 문제가 발생했습니다.

### 원인 분석

* 컬렉터 저항으로 인해 IR LED에 흐르는 전류가 제한됨
* MCU GPIO 단독으로는 충분한 구동 전류 확보가 어려움
* PWM 파형이 IR 리모컨 규격에 정확히 맞지 않음

### 해결 방법

* 컬렉터 저항을 **220Ω → 100Ω**으로 변경하여 LED 구동 전류 확보
* PWM 주파수 및 듀티비를 **IR 리모컨 규격(38kHz)**에 맞게 조정
* GPIO Output Speed 설정을 *Low → Very High*로 변경

### 결과

IR 신호 인식률이 개선되어 다양한 기기에서 안정적인 리모컨 동작을 확인할 수 있었습니다.

---

## 🌱 개선 사항

* 브레드보드 및 점퍼선 사용으로 인한 전압 강하 문제 개선
* PCB 제작을 통한 신호 안정성 향상
* IR 송신 회로 및 배치 최적화를 통한 인식률 추가 개선

---

## ✅ 결과 및 고찰

본 프로젝트를 통해 **IR 통신 방식**, **PWM 기반 신호 생성**, **Flash 메모리를 활용한 비휘발성 데이터 저장 구조**를 직접 구현하며 이해할 수 있었습니다. 또한 하드웨어 회로 설계와 펌웨어 설정이 신호 품질에 미치는 영향을 경험하며, 임베디드 시스템 개발에서 HW·SW를 함께 고려한 설계의 중요성을 배울 수 있었습니다.

---


